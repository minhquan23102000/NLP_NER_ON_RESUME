var fs = require('fs');
var path = require('path');
var Handlebars = require("handlebars");

module.exports = {
  register: function () {
    var partialsDir = path.join(__dirname);
    var filenames = fs.readdirSync(partialsDir);

    filenames.forEach(function (filename) {
      var matches = /^([^.]+).hbs$/.exec(filename);
      if (!matches) {
        return;
      }
      var name = matches[1];
      var filepath = path.join(partialsDir, filename)
      var template = fs.readFileSync(filepath, 'utf8');

      Handlebars.registerPartial(name, template);
    });
  }
};